<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Authify</title>
<link rel="icon" href="https://cdn.discordapp.com/attachments/1445538925786566820/1452877013751824586/111.png?ex=694b68a9&is=694a1729&hm=58e1a44acc5dcd0a4733aca4a8dbcb278af4c768c52821f68dd72c34a80abc4d" type="image/png">

<style>
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

body {
    display: flex;
    min-height: 100vh;
    background: linear-gradient(-45deg, #8b0000, #5a0000, #8b0000, #5a0000); /* vermelho escuro */
    background-size: 400% 400%;
    animation: gradientBG 20s ease infinite; /* anima√ß√£o suave */
    color: #fff;
}

/* anima√ß√£o degrad√™ */
@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}


/* Sidebar esquerda */
.sidebar {
    width: 250px;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 0 20px 20px 0;
}

.sidebar h1 {
    font-size: 24px;
    color: #fff; /* nome ShoxzAuth branco */
    margin-bottom: 30px;
    text-align: center;
}

.socials {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 100%;
    margin-bottom: 30px;
    align-items: center;
}

.socials a {
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: #fff;
    background: #2c2c3e;
    padding: 8px 12px;
    border-radius: 8px;
    width: 80%;
    justify-content: center;
    transition: 0.3s;
    filter: grayscale(100%); /* √≠cones sem cor */
}

.socials a:hover {
    background: #ff0000; /* hover vermelho */
}

.socials img {
    width: 20px;
    height: 20px;
    filter: grayscale(100%);
}

/* Navega√ß√£o da sidebar */
.sidebar .nav {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
}

.sidebar .nav button {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    background: #2c2c3e;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
    transition: 0.3s;
    width: 100%;
}

.sidebar .nav button.active, .sidebar .nav button:hover {
    background: #ff0000; /* bot√£o vermelho ao clicar */
}

/* √Årea principal */
.main {
    flex: 1;
    padding: 40px;
}

.tab {
    display: none;
    flex-direction: column;
    gap: 20px;
}

.tab.active {
    display: flex;
}

.users-title {
    font-size: 36px;
    font-weight: bold;
}

.users-subtitle {
    font-size: 14px;
    color: #aaa;
    margin-bottom: 20px;
}

.create-user {
    display: flex;
    gap: 10px;
    align-items: center;
}

.create-user input {
    padding: 10px;
    border-radius: 8px;
    border: none;
    flex: 1;
    font-size: 16px;
    outline: none;
}

.create-user button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: #ff0000; /* bot√£o vermelho */
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

.create-user button:hover {
    background: #ff4c4c; /* hover mais claro */
}

ul#keysList li {
    background: #2c2c3e;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

ul#keysList li button {
    margin-left: 5px;
    padding: 5px 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: 0.3s;
}

ul#keysList li button.delete {
    background: #e74c3c;
    color: #fff;
}

ul#keysList li button.reset {
    background: #f1c40f;
    color: #000;
}

/* Licenses textarea */
.licenses-area textarea {
    width: 100%;
    height: 300px;
    background: #2c2c3e;
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 15px;
    font-size: 14px;
    resize: none;
    outline: none;
}

.licenses-area button {
    margin-top: 10px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: #ff0000; /* bot√£o vermelho */
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

.licenses-area button:hover {
    background: #ff4c4c;
}
</style>

</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <h1>ShoxzAuth</h1>

    <div class="socials">
        <a href="#" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/6/69/TikTok_logo.svg"> TikTok</a>
        <a href="#" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Facebook_Logo.png"> Facebook</a>
        <a href="#" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"> Instagram</a>
    </div>

    <div class="nav">
        <button id="usersBtn" class="active" onclick="showTab('users')">üë§ Users</button>
        <button id="licensesBtn" onclick="showTab('licenses')">üîë Licenses</button>
    </div>
</div>

<!-- √Årea principal -->
<div class="main">
    <!-- Users Tab -->
    <div id="users" class="tab active">
        <div class="users-title">Users</div>
        <div class="users-subtitle">
            After someone registers for your app with a license, they will appear here. Learn More.
        </div>

        <div class="create-user">
            <input type="number" id="dias" value="30" min="1" placeholder="Dias de validade">
            <button onclick="criarKey()">Create User</button>
        </div>

        <ul id="keysList"></ul>
    </div>

    <!-- Licenses Tab -->
    <div id="licenses" class="tab licenses-area">
        <div class="users-title">Visual Studio Credentials</div>
        <textarea id="vsCode" readonly>
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace SeuNamespace
{
    public partial class FormLogin : Form
    {
        public FormLogin()
        {
            InitializeComponent();
        }

        private async void btnEntrar_Click(object sender, EventArgs e)
        {
            string key = textBoxKey.Text; // TextBox onde usu√°rio digita a key
            using (var client = new HttpClient())
            {
                var json = JsonConvert.SerializeObject(new { key = key });
                var content = new StringContent(json, Encoding.UTF8, "application/json");

                try
                {
                    var response = await client.PostAsync("http://localhost:3000/validar-key", content);
                    var responseString = await response.Content.ReadAsStringAsync();
                    var data = JsonConvert.DeserializeObject<Dictionary<string, object>>(responseString);

                    if ((bool)data["sucesso"])
                    {
                        MessageBox.Show("Key v√°lida! Painel liberado.");
                        Form painel = new FormPainel(); // Nome do seu form de painel
                        painel.Show();
                        this.Hide();
                    }
                    else
                    {
                        MessageBox.Show(data["msg"].ToString());
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Erro ao conectar com o servidor: " + ex.Message);
                }
            }
        }
    }
}
        </textarea>
        <button onclick="copiarVSCode()">Copiar Credentials</button>
    </div>
</div>

<script>
// Navega√ß√£o de abas
function showTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(tab).classList.add('active');

    document.querySelectorAll('.sidebar .nav button').forEach(b => b.classList.remove('active'));
    if(tab==='users') document.getElementById('usersBtn').classList.add('active');
    else document.getElementById('licensesBtn').classList.add('active');
}

// Fun√ß√£o criar key
async function criarKey() {
    const dias = document.getElementById("dias").value;
    if (!dias || dias < 1) { alert("Digite um n√∫mero v√°lido de dias"); return; }

    try {
        const res = await fetch(`/create-key?dias=${dias}`);
        const key = await res.text();
        alert(key);
        listarKeys();
    } catch (err) {
        alert("Erro ao criar key: " + err.message);
    }
}

// Listar keys
async function listarKeys() {
    const res = await fetch("/admin/keys");
    const data = await res.json();

    const ul = document.getElementById("keysList");
    ul.innerHTML = "";

    data.forEach(k => {
        const li = document.createElement("li");
        li.innerHTML = `
            <span>Key: ${k.key} - Expira: ${new Date(k.expiraEm).toLocaleDateString()}</span>
            <div>
                <button class="delete" onclick="apagarKey('${k._id}')">Apagar</button>
                <button class="reset" onclick="resetarKey('${k._id}')">Resetar</button>
            </div>
        `;
        ul.appendChild(li);
    });
}

// Apagar key
async function apagarKey(id) {
    await fetch(`/delete-key/${id}`, { method: "DELETE" });
    listarKeys();
}

// Resetar key
async function resetarKey(id) {
    const dias = prompt("Quantos dias a key deve durar?");
    await fetch(`/reset-key/${id}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ dias: dias })
    });
    listarKeys();
}

// Copiar c√≥digo Visual Studio
function copiarVSCode() {
    const textarea = document.getElementById("vsCode");
    textarea.select();
    textarea.setSelectionRange(0, 99999);
    document.execCommand("copy");
    alert("C√≥digo copiado!");
}

// Inicializa lista de keys
listarKeys();
</script>

</body>
</html>
